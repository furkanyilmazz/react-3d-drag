{"ast":null,"code":"var _jsxFileName = \"/Users/a2017/Documents/GitHub/react-3d-drag/src/App.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { Suspense, useRef, useState, useEffect } from \"react\";\nimport { Canvas, useFrame } from \"@react-three/fiber\";\nimport { ContactShadows, Environment, useGLTF, OrbitControls } from \"@react-three/drei\";\nimport { HexColorPicker } from \"react-colorful\";\nimport { proxy, useSnapshot } from \"valtio\"; // Using a Valtio state model to bridge reactivity between\n// the canvas and the dom, both can write to it and/or react to it.\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst state = proxy({\n  current: null,\n  items: {\n    laces: \"#ffffff\",\n    mesh: \"#ffffff\",\n    caps: \"#ffffff\",\n    inner: \"#ffffff\",\n    sole: \"#ffffff\",\n    stripes: \"#ffffff\",\n    band: \"#ffffff\",\n    patch: \"#ffffff\"\n  }\n});\n\nfunction Object() {\n  _s();\n\n  const ref = useRef();\n  const snap = useSnapshot(state); // Drei's useGLTF hook sets up draco automatically, that's how it differs from useLoader(GLTFLoader, url)\n  // { nodes, materials } are extras that come from useLoader, these do not exist in threejs/GLTFLoader\n  // nodes is a named collection of meshes, materials a named collection of materials\n\n  const {\n    nodes,\n    materials\n  } = useGLTF(\"house.glb\"); // Animate model\n\n  useFrame(state => {\n    const t = state.clock.getElapsedTime();\n    ref.current.rotation.z = -0.2 - (1 + Math.sin(t / 1.5)) / 20;\n    ref.current.rotation.x = Math.cos(t / 4) / 8;\n    ref.current.rotation.y = Math.sin(t / 4) / 8;\n    ref.current.position.y = (1 + Math.sin(t / 1.5)) / 10;\n  }); // Cursor showing current color\n\n  const [hovered, set] = useState(null);\n  useEffect(() => {\n    const cursor = `<svg width=\"64\" height=\"64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><g clip-path=\"url(#clip0)\"><path fill=\"rgba(255, 255, 255, 0.5)\" d=\"M29.5 54C43.031 54 54 43.031 54 29.5S43.031 5 29.5 5 5 15.969 5 29.5 15.969 54 29.5 54z\" stroke=\"#000\"/><g filter=\"url(#filter0_d)\"><path d=\"M29.5 47C39.165 47 47 39.165 47 29.5S39.165 12 29.5 12 12 19.835 12 29.5 19.835 47 29.5 47z\" fill=\"${snap.items[hovered]}\"/></g><path d=\"M2 2l11 2.947L4.947 13 2 2z\" fill=\"#000\"/><text fill=\"#000\" style=\"white-space:pre\" font-family=\"Inter var, sans-serif\" font-size=\"10\" letter-spacing=\"-.01em\"><tspan x=\"35\" y=\"63\">${hovered}</tspan></text></g><defs><clipPath id=\"clip0\"><path fill=\"#fff\" d=\"M0 0h64v64H0z\"/></clipPath><filter id=\"filter0_d\" x=\"6\" y=\"8\" width=\"47\" height=\"47\" filterUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\"><feFlood flood-opacity=\"0\" result=\"BackgroundImageFix\"/><feColorMatrix in=\"SourceAlpha\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"/><feOffset dy=\"2\"/><feGaussianBlur stdDeviation=\"3\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0\"/><feBlend in2=\"BackgroundImageFix\" result=\"effect1_dropShadow\"/><feBlend in=\"SourceGraphic\" in2=\"effect1_dropShadow\" result=\"shape\"/></filter></defs></svg>`;\n    const auto = `<svg width=\"64\" height=\"64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"rgba(255, 255, 255, 0.5)\" d=\"M29.5 54C43.031 54 54 43.031 54 29.5S43.031 5 29.5 5 5 15.969 5 29.5 15.969 54 29.5 54z\" stroke=\"#000\"/><path d=\"M2 2l11 2.947L4.947 13 2 2z\" fill=\"#000\"/></svg>`;\n    document.body.style.cursor = `url('data:image/svg+xml;base64,${btoa(hovered ? cursor : auto)}'), auto`;\n  }, [hovered]); // Using the GLTFJSX output here to wire in app-state and hook up events\n\n  return /*#__PURE__*/_jsxDEV(\"group\", {\n    ref: ref,\n    dispose: null,\n    onPointerOver: e => (e.stopPropagation(), set(e.object.material.name)),\n    onPointerOut: e => e.intersections.length === 0 && set(null),\n    onPointerMissed: () => state.current = null,\n    onPointerDown: e => (e.stopPropagation(), state.current = e.object.material.name),\n    children: [/*#__PURE__*/_jsxDEV(\"mesh\", {\n      receiveShadow: true,\n      castShadow: true,\n      geometry: nodes.shoe.geometry,\n      material: materials.laces,\n      \"material-color\": snap.items.laces\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n      receiveShadow: true,\n      castShadow: true,\n      geometry: nodes.shoe_1.geometry,\n      material: materials.mesh,\n      \"material-color\": snap.items.mesh\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n      receiveShadow: true,\n      castShadow: true,\n      geometry: nodes.shoe_2.geometry,\n      material: materials.caps,\n      \"material-color\": snap.items.caps\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n      receiveShadow: true,\n      castShadow: true,\n      geometry: nodes.shoe_3.geometry,\n      material: materials.inner,\n      \"material-color\": snap.items.inner\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n      receiveShadow: true,\n      castShadow: true,\n      geometry: nodes.shoe_4.geometry,\n      material: materials.sole,\n      \"material-color\": snap.items.sole\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n      receiveShadow: true,\n      castShadow: true,\n      geometry: nodes.shoe_5.geometry,\n      material: materials.stripes,\n      \"material-color\": snap.items.stripes\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n      receiveShadow: true,\n      castShadow: true,\n      geometry: nodes.shoe_6.geometry,\n      material: materials.band,\n      \"material-color\": snap.items.band\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"mesh\", {\n      receiveShadow: true,\n      castShadow: true,\n      geometry: nodes.shoe_7.geometry,\n      material: materials.patch,\n      \"material-color\": snap.items.patch\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Object, \"GpRUStNb2I7cuQRuhzucEMzJnWw=\", false, function () {\n  return [useSnapshot, useGLTF, useFrame];\n});\n\n_c = Object;\n\nfunction Picker() {\n  _s2();\n\n  const snap = useSnapshot(state);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: snap.current ? \"block\" : \"none\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(HexColorPicker, {\n      className: \"picker\",\n      color: snap.items[snap.current],\n      onChange: color => state.items[snap.current] = color\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: snap.current\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(Picker, \"fWPVOJJw6iNU1qFTOiQa4CyZykI=\", false, function () {\n  return [useSnapshot];\n});\n\n_c2 = Picker;\nexport default function App() {\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Canvas, {\n      shadows: true,\n      dpr: [1, 2],\n      camera: {\n        position: [0, 0, 4],\n        fov: 50\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"ambientLight\", {\n        intensity: 0.7\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"spotLight\", {\n        intensity: 0.5,\n        angle: 0.1,\n        penumbra: 1,\n        position: [10, 15, 10],\n        castShadow: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Suspense, {\n        fallback: null,\n        children: [/*#__PURE__*/_jsxDEV(Object, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Environment, {\n          preset: \"city\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ContactShadows, {\n          \"rotation-x\": Math.PI / 2,\n          position: [0, -0.8, 0],\n          opacity: 0.25,\n          width: 10,\n          height: 10,\n          blur: 1.5,\n          far: 0.8\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(OrbitControls, {\n        minPolarAngle: Math.PI / 2,\n        maxPolarAngle: Math.PI / 2,\n        enableZoom: false,\n        enablePan: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Picker, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n}\n_c3 = App;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Object\");\n$RefreshReg$(_c2, \"Picker\");\n$RefreshReg$(_c3, \"App\");","map":{"version":3,"sources":["/Users/a2017/Documents/GitHub/react-3d-drag/src/App.js"],"names":["React","Suspense","useRef","useState","useEffect","Canvas","useFrame","ContactShadows","Environment","useGLTF","OrbitControls","HexColorPicker","proxy","useSnapshot","state","current","items","laces","mesh","caps","inner","sole","stripes","band","patch","Object","ref","snap","nodes","materials","t","clock","getElapsedTime","rotation","z","Math","sin","x","cos","y","position","hovered","set","cursor","auto","document","body","style","btoa","e","stopPropagation","object","material","name","intersections","length","shoe","geometry","shoe_1","shoe_2","shoe_3","shoe_4","shoe_5","shoe_6","shoe_7","Picker","display","color","App","fov","PI"],"mappings":"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","sourcesContent":["import React, { Suspense, useRef, useState, useEffect } from \"react\"\nimport { Canvas, useFrame } from \"@react-three/fiber\"\nimport { ContactShadows, Environment, useGLTF, OrbitControls } from \"@react-three/drei\"\nimport { HexColorPicker } from \"react-colorful\"\nimport { proxy, useSnapshot } from \"valtio\"\n\n// Using a Valtio state model to bridge reactivity between\n// the canvas and the dom, both can write to it and/or react to it.\nconst state = proxy({\n  current: null,\n  items: {\n    laces: \"#ffffff\",\n    mesh: \"#ffffff\",\n    caps: \"#ffffff\",\n    inner: \"#ffffff\",\n    sole: \"#ffffff\",\n    stripes: \"#ffffff\",\n    band: \"#ffffff\",\n    patch: \"#ffffff\",\n  },\n})\n\nfunction Object() {\n  const ref = useRef()\n  const snap = useSnapshot(state)\n  // Drei's useGLTF hook sets up draco automatically, that's how it differs from useLoader(GLTFLoader, url)\n  // { nodes, materials } are extras that come from useLoader, these do not exist in threejs/GLTFLoader\n  // nodes is a named collection of meshes, materials a named collection of materials\n  const { nodes, materials } = useGLTF(\"house.glb\")\n\n  // Animate model\n  useFrame((state) => {\n    const t = state.clock.getElapsedTime()\n    ref.current.rotation.z = -0.2 - (1 + Math.sin(t / 1.5)) / 20\n    ref.current.rotation.x = Math.cos(t / 4) / 8\n    ref.current.rotation.y = Math.sin(t / 4) / 8\n    ref.current.position.y = (1 + Math.sin(t / 1.5)) / 10\n  })\n\n  // Cursor showing current color\n  const [hovered, set] = useState(null)\n  useEffect(() => {\n    const cursor = `<svg width=\"64\" height=\"64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><g clip-path=\"url(#clip0)\"><path fill=\"rgba(255, 255, 255, 0.5)\" d=\"M29.5 54C43.031 54 54 43.031 54 29.5S43.031 5 29.5 5 5 15.969 5 29.5 15.969 54 29.5 54z\" stroke=\"#000\"/><g filter=\"url(#filter0_d)\"><path d=\"M29.5 47C39.165 47 47 39.165 47 29.5S39.165 12 29.5 12 12 19.835 12 29.5 19.835 47 29.5 47z\" fill=\"${snap.items[hovered]}\"/></g><path d=\"M2 2l11 2.947L4.947 13 2 2z\" fill=\"#000\"/><text fill=\"#000\" style=\"white-space:pre\" font-family=\"Inter var, sans-serif\" font-size=\"10\" letter-spacing=\"-.01em\"><tspan x=\"35\" y=\"63\">${hovered}</tspan></text></g><defs><clipPath id=\"clip0\"><path fill=\"#fff\" d=\"M0 0h64v64H0z\"/></clipPath><filter id=\"filter0_d\" x=\"6\" y=\"8\" width=\"47\" height=\"47\" filterUnits=\"userSpaceOnUse\" color-interpolation-filters=\"sRGB\"><feFlood flood-opacity=\"0\" result=\"BackgroundImageFix\"/><feColorMatrix in=\"SourceAlpha\" values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0\"/><feOffset dy=\"2\"/><feGaussianBlur stdDeviation=\"3\"/><feColorMatrix values=\"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0\"/><feBlend in2=\"BackgroundImageFix\" result=\"effect1_dropShadow\"/><feBlend in=\"SourceGraphic\" in2=\"effect1_dropShadow\" result=\"shape\"/></filter></defs></svg>`\n    const auto = `<svg width=\"64\" height=\"64\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"rgba(255, 255, 255, 0.5)\" d=\"M29.5 54C43.031 54 54 43.031 54 29.5S43.031 5 29.5 5 5 15.969 5 29.5 15.969 54 29.5 54z\" stroke=\"#000\"/><path d=\"M2 2l11 2.947L4.947 13 2 2z\" fill=\"#000\"/></svg>`\n    document.body.style.cursor = `url('data:image/svg+xml;base64,${btoa(hovered ? cursor : auto)}'), auto`\n  }, [hovered])\n\n  // Using the GLTFJSX output here to wire in app-state and hook up events\n  return (\n    <group\n      ref={ref}\n      dispose={null}\n      onPointerOver={(e) => (e.stopPropagation(), set(e.object.material.name))}\n      onPointerOut={(e) => e.intersections.length === 0 && set(null)}\n      onPointerMissed={() => (state.current = null)}\n      onPointerDown={(e) => (e.stopPropagation(), (state.current = e.object.material.name))}>\n      <mesh receiveShadow castShadow geometry={nodes.shoe.geometry} material={materials.laces} material-color={snap.items.laces} />\n      <mesh receiveShadow castShadow geometry={nodes.shoe_1.geometry} material={materials.mesh} material-color={snap.items.mesh} />\n      <mesh receiveShadow castShadow geometry={nodes.shoe_2.geometry} material={materials.caps} material-color={snap.items.caps} />\n      <mesh receiveShadow castShadow geometry={nodes.shoe_3.geometry} material={materials.inner} material-color={snap.items.inner} />\n      <mesh receiveShadow castShadow geometry={nodes.shoe_4.geometry} material={materials.sole} material-color={snap.items.sole} />\n      <mesh receiveShadow castShadow geometry={nodes.shoe_5.geometry} material={materials.stripes} material-color={snap.items.stripes} />\n      <mesh receiveShadow castShadow geometry={nodes.shoe_6.geometry} material={materials.band} material-color={snap.items.band} />\n      <mesh receiveShadow castShadow geometry={nodes.shoe_7.geometry} material={materials.patch} material-color={snap.items.patch} />\n    </group>\n  )\n}\n\nfunction Picker() {\n  const snap = useSnapshot(state)\n  return (\n    <div style={{ display: snap.current ? \"block\" : \"none\" }}>\n      <HexColorPicker className=\"picker\" color={snap.items[snap.current]} onChange={(color) => (state.items[snap.current] = color)} />\n      <h1>{snap.current}</h1>\n    </div>\n  )\n}\n\nexport default function App() {\n  return (\n    <>\n      <Canvas shadows dpr={[1, 2]} camera={{ position: [0, 0, 4], fov: 50 }}>\n        <ambientLight intensity={0.7} />\n        <spotLight intensity={0.5} angle={0.1} penumbra={1} position={[10, 15, 10]} castShadow />\n        <Suspense fallback={null}>\n          <Object />\n          <Environment preset=\"city\" />\n          <ContactShadows rotation-x={Math.PI / 2} position={[0, -0.8, 0]} opacity={0.25} width={10} height={10} blur={1.5} far={0.8} />\n        </Suspense>\n        <OrbitControls minPolarAngle={Math.PI / 2} maxPolarAngle={Math.PI / 2} enableZoom={false} enablePan={false} />\n      </Canvas>\n      <Picker />\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}