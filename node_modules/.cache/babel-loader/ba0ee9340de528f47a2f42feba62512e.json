{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar proxyCompare = require('proxy-compare');\n\nvar VERSION = Symbol();\nvar LISTENERS = Symbol();\nvar SNAPSHOT = Symbol();\nvar PROMISE_RESULT = Symbol();\nvar PROMISE_ERROR = Symbol();\nvar refSet = new WeakSet();\n\nvar ref = function ref(o) {\n  refSet.add(o);\n  return o;\n};\n\nvar isSupportedObject = function isSupportedObject(x) {\n  return typeof x === 'object' && x !== null && (Array.isArray(x) || !x[Symbol.iterator]) && !(x instanceof WeakMap) && !(x instanceof WeakSet) && !(x instanceof Error) && !(x instanceof Number) && !(x instanceof Date) && !(x instanceof String) && !(x instanceof RegExp) && !(x instanceof ArrayBuffer);\n};\n\nvar proxyCache = new WeakMap();\nvar globalVersion = 1;\nvar snapshotCache = new WeakMap();\n\nvar proxy = function proxy(initialObject) {\n  if (initialObject === void 0) {\n    initialObject = {};\n  }\n\n  if (!isSupportedObject(initialObject)) {\n    throw new Error('unsupported object type');\n  }\n\n  var found = proxyCache.get(initialObject);\n\n  if (found) {\n    return found;\n  }\n\n  var version = globalVersion;\n  var listeners = new Set();\n\n  var notifyUpdate = function notifyUpdate(nextVersion) {\n    if (!nextVersion) {\n      nextVersion = ++globalVersion;\n    }\n\n    if (version !== nextVersion) {\n      version = nextVersion;\n      listeners.forEach(function (listener) {\n        return listener(nextVersion);\n      });\n    }\n  };\n\n  var createSnapshot = function createSnapshot(target, receiver) {\n    var cache = snapshotCache.get(receiver);\n\n    if ((cache == null ? void 0 : cache[0]) === version) {\n      return cache[1];\n    }\n\n    var snapshot = Array.isArray(target) ? [] : Object.create(Object.getPrototypeOf(target));\n    proxyCompare.markToTrack(snapshot, true);\n    snapshotCache.set(receiver, [version, snapshot]);\n    Reflect.ownKeys(target).forEach(function (key) {\n      var value = target[key];\n\n      if (refSet.has(value)) {\n        proxyCompare.markToTrack(value, false);\n        snapshot[key] = value;\n      } else if (!isSupportedObject(value)) {\n        snapshot[key] = value;\n      } else if (value instanceof Promise) {\n        if (PROMISE_RESULT in value) {\n          snapshot[key] = value[PROMISE_RESULT];\n        } else {\n          var errorOrPromise = value[PROMISE_ERROR] || value;\n          Object.defineProperty(snapshot, key, {\n            get: function get() {\n              throw errorOrPromise;\n            }\n          });\n        }\n      } else if (value[VERSION]) {\n        snapshot[key] = value[SNAPSHOT];\n      } else {\n        snapshot[key] = value;\n      }\n    });\n    Object.freeze(snapshot);\n    return snapshot;\n  };\n\n  var baseObject = Array.isArray(initialObject) ? [] : Object.create(Object.getPrototypeOf(initialObject));\n  var proxyObject = new Proxy(baseObject, {\n    get: function get(target, prop, receiver) {\n      if (prop === VERSION) {\n        return version;\n      }\n\n      if (prop === LISTENERS) {\n        return listeners;\n      }\n\n      if (prop === SNAPSHOT) {\n        return createSnapshot(target, receiver);\n      }\n\n      return target[prop];\n    },\n    deleteProperty: function deleteProperty(target, prop) {\n      var prevValue = target[prop];\n      var childListeners = prevValue == null ? void 0 : prevValue[LISTENERS];\n\n      if (childListeners) {\n        childListeners.delete(notifyUpdate);\n      }\n\n      var deleted = Reflect.deleteProperty(target, prop);\n\n      if (deleted) {\n        notifyUpdate();\n      }\n\n      return deleted;\n    },\n    set: function set(target, prop, value) {\n      var _Object$getOwnPropert;\n\n      var prevValue = target[prop];\n\n      if (Object.is(prevValue, value)) {\n        return true;\n      }\n\n      var childListeners = prevValue == null ? void 0 : prevValue[LISTENERS];\n\n      if (childListeners) {\n        childListeners.delete(notifyUpdate);\n      }\n\n      if (refSet.has(value) || !isSupportedObject(value) || (_Object$getOwnPropert = Object.getOwnPropertyDescriptor(target, prop)) != null && _Object$getOwnPropert.set) {\n        target[prop] = value;\n      } else if (value instanceof Promise) {\n        target[prop] = value.then(function (v) {\n          target[prop][PROMISE_RESULT] = v;\n          notifyUpdate();\n          return v;\n        }).catch(function (e) {\n          target[prop][PROMISE_ERROR] = e;\n          notifyUpdate();\n        });\n      } else {\n        value = proxyCompare.getUntracked(value) || value;\n\n        if (value[LISTENERS]) {\n          target[prop] = value;\n        } else {\n          target[prop] = proxy(value);\n        }\n\n        target[prop][LISTENERS].add(notifyUpdate);\n      }\n\n      notifyUpdate();\n      return true;\n    }\n  });\n  proxyCache.set(initialObject, proxyObject);\n  Reflect.ownKeys(initialObject).forEach(function (key) {\n    var desc = Object.getOwnPropertyDescriptor(initialObject, key);\n\n    if (desc.get || desc.set) {\n      Object.defineProperty(baseObject, key, desc);\n    } else {\n      proxyObject[key] = initialObject[key];\n    }\n  });\n  return proxyObject;\n};\n\nvar getVersion = function getVersion(proxyObject) {\n  if (typeof process === 'object' && process.env.NODE_ENV !== 'production' && !(proxyObject != null && proxyObject[VERSION])) {\n    throw new Error('Please use proxy object');\n  }\n\n  return proxyObject[VERSION];\n};\n\nvar subscribe = function subscribe(proxyObject, callback, notifyInSync) {\n  if (typeof process === 'object' && process.env.NODE_ENV !== 'production' && !(proxyObject != null && proxyObject[LISTENERS])) {\n    throw new Error('Please use proxy object');\n  }\n\n  var pendingVersion = 0;\n\n  var listener = function listener(nextVersion) {\n    if (notifyInSync) {\n      callback();\n      return;\n    }\n\n    pendingVersion = nextVersion;\n    Promise.resolve().then(function () {\n      if (nextVersion === pendingVersion) {\n        callback();\n      }\n    });\n  };\n\n  proxyObject[LISTENERS].add(listener);\n  return function () {\n    proxyObject[LISTENERS].delete(listener);\n  };\n};\n\nvar snapshot = function snapshot(proxyObject) {\n  if (typeof process === 'object' && process.env.NODE_ENV !== 'production' && !(proxyObject != null && proxyObject[SNAPSHOT])) {\n    throw new Error('Please use proxy object');\n  }\n\n  return proxyObject[SNAPSHOT];\n};\n\nexports.getVersion = getVersion;\nexports.proxy = proxy;\nexports.ref = ref;\nexports.snapshot = snapshot;\nexports.subscribe = subscribe;","map":{"version":3,"sources":["/Users/a2017/Documents/GitHub/react-3d-drag/node_modules/valtio/vanilla.js"],"names":["Object","defineProperty","exports","value","proxyCompare","require","VERSION","Symbol","LISTENERS","SNAPSHOT","PROMISE_RESULT","PROMISE_ERROR","refSet","WeakSet","ref","o","add","isSupportedObject","x","Array","isArray","iterator","WeakMap","Error","Number","Date","String","RegExp","ArrayBuffer","proxyCache","globalVersion","snapshotCache","proxy","initialObject","found","get","version","listeners","Set","notifyUpdate","nextVersion","forEach","listener","createSnapshot","target","receiver","cache","snapshot","create","getPrototypeOf","markToTrack","set","Reflect","ownKeys","key","has","Promise","errorOrPromise","freeze","baseObject","proxyObject","Proxy","prop","deleteProperty","prevValue","childListeners","delete","deleted","_Object$getOwnPropert","is","getOwnPropertyDescriptor","then","v","catch","e","getUntracked","desc","getVersion","process","env","NODE_ENV","subscribe","callback","notifyInSync","pendingVersion","resolve"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar proxyCompare = require('proxy-compare');\n\nvar VERSION = Symbol();\nvar LISTENERS = Symbol();\nvar SNAPSHOT = Symbol();\nvar PROMISE_RESULT = Symbol();\nvar PROMISE_ERROR = Symbol();\nvar refSet = new WeakSet();\nvar ref = function ref(o) {\n  refSet.add(o);\n  return o;\n};\n\nvar isSupportedObject = function isSupportedObject(x) {\n  return typeof x === 'object' && x !== null && (Array.isArray(x) || !x[Symbol.iterator]) && !(x instanceof WeakMap) && !(x instanceof WeakSet) && !(x instanceof Error) && !(x instanceof Number) && !(x instanceof Date) && !(x instanceof String) && !(x instanceof RegExp) && !(x instanceof ArrayBuffer);\n};\n\nvar proxyCache = new WeakMap();\nvar globalVersion = 1;\nvar snapshotCache = new WeakMap();\nvar proxy = function proxy(initialObject) {\n  if (initialObject === void 0) {\n    initialObject = {};\n  }\n\n  if (!isSupportedObject(initialObject)) {\n    throw new Error('unsupported object type');\n  }\n\n  var found = proxyCache.get(initialObject);\n\n  if (found) {\n    return found;\n  }\n\n  var version = globalVersion;\n  var listeners = new Set();\n\n  var notifyUpdate = function notifyUpdate(nextVersion) {\n    if (!nextVersion) {\n      nextVersion = ++globalVersion;\n    }\n\n    if (version !== nextVersion) {\n      version = nextVersion;\n      listeners.forEach(function (listener) {\n        return listener(nextVersion);\n      });\n    }\n  };\n\n  var createSnapshot = function createSnapshot(target, receiver) {\n    var cache = snapshotCache.get(receiver);\n\n    if ((cache == null ? void 0 : cache[0]) === version) {\n      return cache[1];\n    }\n\n    var snapshot = Array.isArray(target) ? [] : Object.create(Object.getPrototypeOf(target));\n    proxyCompare.markToTrack(snapshot, true);\n    snapshotCache.set(receiver, [version, snapshot]);\n    Reflect.ownKeys(target).forEach(function (key) {\n      var value = target[key];\n\n      if (refSet.has(value)) {\n        proxyCompare.markToTrack(value, false);\n        snapshot[key] = value;\n      } else if (!isSupportedObject(value)) {\n        snapshot[key] = value;\n      } else if (value instanceof Promise) {\n        if (PROMISE_RESULT in value) {\n          snapshot[key] = value[PROMISE_RESULT];\n        } else {\n          var errorOrPromise = value[PROMISE_ERROR] || value;\n          Object.defineProperty(snapshot, key, {\n            get: function get() {\n              throw errorOrPromise;\n            }\n          });\n        }\n      } else if (value[VERSION]) {\n        snapshot[key] = value[SNAPSHOT];\n      } else {\n        snapshot[key] = value;\n      }\n    });\n    Object.freeze(snapshot);\n    return snapshot;\n  };\n\n  var baseObject = Array.isArray(initialObject) ? [] : Object.create(Object.getPrototypeOf(initialObject));\n  var proxyObject = new Proxy(baseObject, {\n    get: function get(target, prop, receiver) {\n      if (prop === VERSION) {\n        return version;\n      }\n\n      if (prop === LISTENERS) {\n        return listeners;\n      }\n\n      if (prop === SNAPSHOT) {\n        return createSnapshot(target, receiver);\n      }\n\n      return target[prop];\n    },\n    deleteProperty: function deleteProperty(target, prop) {\n      var prevValue = target[prop];\n      var childListeners = prevValue == null ? void 0 : prevValue[LISTENERS];\n\n      if (childListeners) {\n        childListeners.delete(notifyUpdate);\n      }\n\n      var deleted = Reflect.deleteProperty(target, prop);\n\n      if (deleted) {\n        notifyUpdate();\n      }\n\n      return deleted;\n    },\n    set: function set(target, prop, value) {\n      var _Object$getOwnPropert;\n\n      var prevValue = target[prop];\n\n      if (Object.is(prevValue, value)) {\n        return true;\n      }\n\n      var childListeners = prevValue == null ? void 0 : prevValue[LISTENERS];\n\n      if (childListeners) {\n        childListeners.delete(notifyUpdate);\n      }\n\n      if (refSet.has(value) || !isSupportedObject(value) || (_Object$getOwnPropert = Object.getOwnPropertyDescriptor(target, prop)) != null && _Object$getOwnPropert.set) {\n        target[prop] = value;\n      } else if (value instanceof Promise) {\n        target[prop] = value.then(function (v) {\n          target[prop][PROMISE_RESULT] = v;\n          notifyUpdate();\n          return v;\n        }).catch(function (e) {\n          target[prop][PROMISE_ERROR] = e;\n          notifyUpdate();\n        });\n      } else {\n        value = proxyCompare.getUntracked(value) || value;\n\n        if (value[LISTENERS]) {\n          target[prop] = value;\n        } else {\n          target[prop] = proxy(value);\n        }\n\n        target[prop][LISTENERS].add(notifyUpdate);\n      }\n\n      notifyUpdate();\n      return true;\n    }\n  });\n  proxyCache.set(initialObject, proxyObject);\n  Reflect.ownKeys(initialObject).forEach(function (key) {\n    var desc = Object.getOwnPropertyDescriptor(initialObject, key);\n\n    if (desc.get || desc.set) {\n      Object.defineProperty(baseObject, key, desc);\n    } else {\n      proxyObject[key] = initialObject[key];\n    }\n  });\n  return proxyObject;\n};\nvar getVersion = function getVersion(proxyObject) {\n  if (typeof process === 'object' && process.env.NODE_ENV !== 'production' && !(proxyObject != null && proxyObject[VERSION])) {\n    throw new Error('Please use proxy object');\n  }\n\n  return proxyObject[VERSION];\n};\nvar subscribe = function subscribe(proxyObject, callback, notifyInSync) {\n  if (typeof process === 'object' && process.env.NODE_ENV !== 'production' && !(proxyObject != null && proxyObject[LISTENERS])) {\n    throw new Error('Please use proxy object');\n  }\n\n  var pendingVersion = 0;\n\n  var listener = function listener(nextVersion) {\n    if (notifyInSync) {\n      callback();\n      return;\n    }\n\n    pendingVersion = nextVersion;\n    Promise.resolve().then(function () {\n      if (nextVersion === pendingVersion) {\n        callback();\n      }\n    });\n  };\n\n  proxyObject[LISTENERS].add(listener);\n  return function () {\n    proxyObject[LISTENERS].delete(listener);\n  };\n};\nvar snapshot = function snapshot(proxyObject) {\n  if (typeof process === 'object' && process.env.NODE_ENV !== 'production' && !(proxyObject != null && proxyObject[SNAPSHOT])) {\n    throw new Error('Please use proxy object');\n  }\n\n  return proxyObject[SNAPSHOT];\n};\n\nexports.getVersion = getVersion;\nexports.proxy = proxy;\nexports.ref = ref;\nexports.snapshot = snapshot;\nexports.subscribe = subscribe;\n"]},"metadata":{},"sourceType":"script"}